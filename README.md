# StudyTool Server

The Web-application for the StudyTool. 

## Features

- API for plugins
    - upload
    - download
    - info
- homepage
- account system
    - login
    - register
- profile
    - show plugins
    - show user data
- marketplace
    - show all plugins
    - search plugin
- download application page
- dev guide

## Installation

### For developers

**Prerequisites**

- golang version 1.13 or above (https://golang.org/dl/)
- npm (https://www.npmjs.com/get-npm)

**Install everything**

- clone this repo 
```shell script
git clone https://github.com/PluginSystem-StudyManager/Server.git
cd Server
```
- install all needed node packages
```shell script
# WORKDIR: Server
npm install
```
- install all needed go modules
```shell script
# WORKDIR: Server/src
go get -d ./...
```

**Start the server**

- **compile all 'sass' and 'ts' files**

This also watches for changes and automatically compiles these files.
```shell script
# WORKDIR: Server
npm run grunt
```

- generate go code
 
Some go code is generated by tools. This code is not added to version control. 
You only need to execute this the first time or when you made changes to a `.jade` or `.schema.json` file.
```shell script
# WORKDIR: Server/src
go generate
```

- compile go code

```shell script
# WORKDIR: Server/src
go install ./...
```

- Start the server

```shell script
server
```

**Troubleshooting**

### Run on a Server

**Prerequisites**

You need a linux based os for this to work.

**Single script setup**

If you are on a debian based distro you can use this one liner to set up everything and start the server.

[//]: # (TODO: change to master branch)

```shell script
sh -c "$(curl -fsSL https://raw.githubusercontent.com/PluginSystem-StudyManager/Server/dev/scripts/install.sh)"
``` 

**Manual setup**

You can also do the steps from the above script manually:

- Clone repo

```shell script
git clone https://github.com/PluginSystem-StudyManager/Server.git
cd Server
```

- Install docker and docker-compose (https://docs.docker.com/get-docker/)

You can use the [install_docker](scripts/install_docker) script if you are on a debian based distro.

- build + start the server

You may have to run this as `sudo`. 

For more information about docker-compose see: https://docs.docker.com/compose/reference/overview/

```shell script
# WORKDIR: Server
docker-compose up
```
